---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
#
# ----------------------------------------------------------------------------
#
#     This file is automatically generated by Magic Modules and manual
#     changes will be clobbered when the file is regenerated.
#
#     Please read more about how to change this file in
#     .github/CONTRIBUTING.md.
#
# ----------------------------------------------------------------------------
subcategory: "AlloyDB"
description: |-
  An AlloyDB User.
---

# google\_alloydb\_user

An AlloyDB User.


To get more information about User, see:

* [API documentation](https://cloud.google.com/alloydb/docs/reference/rest/v1/projects.locations.clusters.users/create)
* How-to Guides
    * [AlloyDB](https://cloud.google.com/alloydb/docs/)

~> **Warning:** All arguments including the following potentially sensitive
values will be stored in the raw state as plain text: `password`.
[Read more about sensitive data in state](https://www.terraform.io/language/state/sensitive-data).

## Example Usage - Alloydb User


```hcl
resource "google_alloydb_user" "default" {
  user_id     = "me"
  password    = "changeme"

  database_roles = [
    "postgres"
  ]

  cluster = google_alloydb_cluster.default.id

  depends_on = [google_alloydb_cluster.default]
}

resource "google_compute_network" "default" {
	name = "tf-test-alloydb-cluster%{random_suffix}"
}

resource "google_alloydb_cluster" "default" {
  cluster_id = "alloydb-cluster"
  location   = "us-central1"
  network    = google_compute_network.default.id
}

resource "google_alloydb_instance" "default" {
  cluster       = google_alloydb_cluster.default.name
  instance_id   = "alloydb-instance"
  instance_type = "PRIMARY"

  depends_on = [google_service_networking_connection.vpc_connection]
}

resource "google_compute_global_address" "private_ip_alloc" {
  name          =  "alloydb-cluster"
  address_type  = "INTERNAL"
  purpose       = "VPC_PEERING"
  prefix_length = 16
  network       = google_compute_network.default.id
}

resource "google_service_networking_connection" "vpc_connection" {
  network                 = google_compute_network.default.id
  service                 = "servicenetworking.googleapis.com"
  reserved_peering_ranges = [google_compute_global_address.private_ip_alloc.name]
}
```
## Example Usage - Alloydb User Iam User


```hcl
resource "google_alloydb_user" "default" {
  user_id      = "me@example.com"
  user_type    = "ALLOYDB_IAM_USER"

  database_roles = [
    "alloydbiamuser"
  ]

  cluster = google_alloydb_cluster.default.id

  depends_on = [google_alloydb_instance.default]
}

resource "google_compute_network" "default" {
	name = "tf-test-alloydb-cluster%{random_suffix}"
}

resource "google_alloydb_cluster" "default" {
  cluster_id = "alloydb-cluster-iam"
  location   = "us-central1"
  network    = google_compute_network.default.id
}

resource "google_alloydb_instance" "default" {
  cluster       = google_alloydb_cluster.default.name
  instance_id   = "alloydb-instance-iam"
  instance_type = "PRIMARY"

  depends_on = [google_service_networking_connection.vpc_connection]
}

resource "google_compute_global_address" "private_ip_alloc" {
  name          =  "alloydb-cluster-iam"
  address_type  = "INTERNAL"
  purpose       = "VPC_PEERING"
  prefix_length = 16
  network       = google_compute_network.default.id
}

resource "google_service_networking_connection" "vpc_connection" {
  network                 = google_compute_network.default.id
  service                 = "servicenetworking.googleapis.com"
  reserved_peering_ranges = [google_compute_global_address.private_ip_alloc.name]
}
```

## Argument Reference

The following arguments are supported:


* `user_id` -
  (Required)
  The ID of the alloydb user.

* `cluster` -
  (Required)
  Identifies the alloydb cluster. Must be in the format
  'projects/{project}/locations/{location}/clusters/{cluster_id}'


- - -


* `password` -
  (Optional)
  Input only. Password for the user. This field is required but shouldn't be set if user_type is set to `ALLOYDB_IAM_USER`
  **Note**: This property is sensitive and will not be displayed in the plan.

* `database_roles` -
  (Optional)
  Optional. List of database roles this user has. The database role strings are subject to the PostgreSQL naming conventions.

* `user_type` -
  (Optional)
  Optional. Type of this user.
  Default value is `ALLOYDB_BUILT_IN`.
  Possible values are: `ALLOYDB_BUILT_IN`, `ALLOYDB_IAM_USER`.


## Attributes Reference

In addition to the arguments listed above, the following computed attributes are exported:

* `id` - an identifier for the resource with format `{{cluster}}/users/{{user_id}}`

* `name` -
  Output only. Name of the resource in the form of projects/{project}/locations/{location}/cluster/{cluster}/users/{user}.


## Timeouts

This resource provides the following
[Timeouts](https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts) configuration options:

- `create` - Default is 20 minutes.
- `update` - Default is 20 minutes.
- `delete` - Default is 20 minutes.

## Import


User can be imported using any of these accepted formats:

```
$ terraform import google_alloydb_user.default {{cluster}}/users/{{user_id}}
$ terraform import google_alloydb_user.default {{cluster}}/{{user_id}}
```
