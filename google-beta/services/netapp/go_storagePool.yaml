# the license inside this block applies to this file
# Copyright 2024 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
name: 'storagePool'
description: |
	Storage pools act as containers for volumes. All volumes in a storage pool share the following information:
* Location
* Service level
* Virtual Private Cloud (VPC) network
* Active Directory policy
* LDAP use for NFS volumes, if applicable
* Customer-managed encryption key (CMEK) policy

The capacity of the pool can be split up and assigned to volumes within the pool. Storage pools are a billable
component of NetApp Volumes. Billing is based on the location, service level, and capacity allocated to a pool
independent of consumption at the volume level.
references:
	guides:
		- 'QUICKSTART_TITLE': 'https://cloud.google.com/netapp/volumes/docs/get-started/quickstarts/create-storage-pool'
	api: 'https://cloud.google.com/netapp/volumes/docs/reference/rest/v1/projects.locations.storagePools'
docs:
id_format: 'projects/{{project}}/locations/{{location}}/storagePools/{{name}}'
base_url: 'projects/{{project}}/locations/{{location}}/storagePools'
self_link: 'projects/{{project}}/locations/{{location}}/storagePools/{{name}}'
create_url: 'projects/{{project}}/locations/{{location}}/storagePools?storagePoolId={{name}}'
update_url: 'projects/{{project}}/locations/{{location}}/storagePools/{{name}}'
update_verb: 'PATCH'
update_mask: true
delete_url: 'projects/{{project}}/locations/{{location}}/storagePools/{{name}}'
import_format:
		- 'projects/{{project}}/locations/{{location}}/storagePools/{{name}}'
timeouts:
	insert_minutes: 20
	update_minutes: 20
	delete_minutes: 20
autogen_async: true
async:
	operation: 
		base_url: '{{op_id}}'
	result: 
		resource_inside_response: false
custom_code:
examples:
	- name: 'Storage_pool_create'
		primary_resource_id: 'test_pool'
		primary_resource_name: 'test_pool'
		vars:
			- pool_name: 'test-pool'
			- network_name: 'test-network'
			- global_name: 'test-address'
parameters:
	- name: 'location'
		type: String
		description: 'Name of the location. Usually a region name, expect for some STANDARD service level pools which require a zone name.'
		url_param_only: true
		required: true
		immutable: true
	- name: 'name'
		type: String
		description: 'The resource name of the storage pool. Needs to be unique per location.'
		url_param_only: true
		required: true
		immutable: true
properties:
	- name: 'serviceLevel'
		type: Enum
		description: 'Service level of the storage pool.'
		required: true
		immutable: true
		values:
			- 'PREMIUM'
			- 'EXTREME'
			- 'STANDARD'
	- name: 'capacityGib'
		type: String
		description: 'Capacity of the storage pool (in GiB).'
		required: true
	- name: 'volumeCapacityGib'
		type: String
		description: 'Size allocated to volumes in the storage pool (in GiB).'
		output: true
	- name: 'volumeCount'
		type: Integer
		description: 'Number of volume in the storage pool.'
		output: true
	- name: 'description'
		type: String
		description: 'An optional description of this resource.'
	- name: 'labels'
		type: KeyValueLabels
		description: 'Labels as key value pairs. Example: `{ "owner": "Bob", "department": "finance", "purpose": "testing" }`.


**Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field `effective_labels` for all of the labels present on the resource.'
		immutable: false
	- name: 'network'
		type: String
		description: 'VPC network name with format: `projects/{{project}}/global/networks/{{network}}`'
		required: true
		immutable: true
		diff_suppress_func: 'tpgresource.ProjectNumberDiffSuppress'
	- name: 'activeDirectory'
		type: String
		description: 'Specifies the Active Directory policy to be used. Format: `projects/{{project}}/locations/{{location}}/activeDirectories/{{name}}`.
The policy needs to be in the same location as the storage pool.'
	- name: 'kmsConfig'
		type: String
		description: 'Specifies the CMEK policy to be used for volume encryption. Format: `projects/{{project}}/locations/{{location}}/kmsConfigs/{{name}}`.
The policy needs to be in the same location as the storage pool.'
		immutable: true
	- name: 'ldapEnabled'
		type: Boolean
		description: 'When enabled, the volumes uses Active Directory as LDAP name service for UID/GID lookups. Required to enable extended group support for NFSv3,
using security identifiers for NFSv4.1 or principal names for kerberized NFSv4.1.'
		immutable: true
	- name: 'encryptionType'
		type: Enum
		description: 'Reports if volumes in the pool are encrypted using a Google-managed encryption key or CMEK.'
		output: true
		values:
			- 'ENCRYPTION_TYPE_UNSPECIFIED'
			- 'SERVICE_MANAGED'
			- 'CLOUD_KMS'
